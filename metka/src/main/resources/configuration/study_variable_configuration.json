{
    "key": {
        "version": 1,
        "type": "STUDY_VARIABLE"
    },
    "selectionLists": {
        "statisticstype_list": {
            "key": "statisticstype_list",
            "type": "VALUE",
            "default": "vald",
            "options": [
                {
                    "value": "vald",
                    "title": "Lukumäärä"
                },
                {
                    "value": "min",
                    "title": "Minimi"
                },
                {
                    "value": "max",
                    "title": "Maksimi"
                },
                {
                    "value": "mean",
                    "title": "Keskiarvo"
                },
                {
                    "value": "stdev",
                    "title": "Keskihajonta"
                }
            ]
        }
    },
    "references": {
        "study_ref": {
            "key": "study_ref",
            "type": "REVISIONABLE",
            "target": "STUDY",
            "titlePath": "title"
        },
        "variables_ref": {
            "key": "variables_ref",
            "type": "REVISIONABLE",
            "target": "STUDY_VARIABLES",
            "titlePath": "id"
        }
    },
    "displayId": "varid",
    "fields": {
        "study": {
            "key": "study",
            "translatable": false,
            "immutable": true,
            "editable": false,
            "type": "REFERENCE",
            "reference": "study_ref"
        },
        "variables": {
            "key": "variables",
            "translatable": false,
            "immutable": true,
            "editable": false,
            "type": "REFERENCE",
            "reference": "variables_ref"
        },
        "varname": {
            "key": "varname",
            "translatable": false,
            "type": "STRING",
            "editable": false,
            "immutable": true
        },
        "varid": {
            "key": "varid",
            "translatable": false,
            "type": "STRING",
            "editable": false,
            "immutable": true
        },
        "varlabel": {
            "key": "varlabel",
            "translatable": true,
            "type": "STRING",
            "generalSearch": true,
            "editable": false
        },
        "varinterval": {
            "key": "varinterval",
            "translatable": false,
            "type": "STRING"
        },
        "qstnlits": {
            "key": "qstnlits",
            "translatable": true,
            "type": "CONTAINER",
            "subfields": [
                "qstnlit"
            ]
        },
        "qstnlit": {
            "key": "qstnlit",
            "translatable": false,
            "type": "STRING",
            "subfield": true,
            "generalSearch": true,
			"exact": false
        },
        "preqtxts": {
            "key": "preqtxts",
            "translatable": true,
            "type": "CONTAINER",
            "subfields": [
                "preqtxt"
            ]
        },
        "preqtxt": {
            "key": "preqtxt",
            "translatable": false,
            "type": "STRING",
            "subfield": true,
			"exact": false
        },
        "postqtxts": {
            "key": "postqtxts",
            "translatable": true,
            "type": "CONTAINER",
            "subfields": [
                "postqtxt"
            ]
        },
        "postqtxt": {
            "key": "postqtxt",
            "translatable": false,
            "type": "STRING",
            "subfield": true,
			"exact": false
        },
        "ivuinstrs": {
            "key": "ivuinstrs",
            "translatable": true,
            "type": "CONTAINER",
            "subfields": [
                "ivuinstr"
            ]
        },
        "ivuinstr": {
            "key": "ivuinstr",
            "translatable": false,
            "type": "STRING",
            "subfield": true,
			"exact": false
        },
        "varnotes": {
            "key": "varnotes",
            "translatable": true,
            "type": "CONTAINER",
            "subfields": [
                "varnote"
            ]
        },
        "varnote": {
            "key": "varnote",
            "translatable": false,
            "type": "STRING",
            "subfield": true,
			"exact": false
        },
        "vartexts": {
            "key": "vartexts",
            "translatable": true,
            "type": "CONTAINER",
            "subfields": [
                "vartext"
            ]
        },
        "vartext": {
            "key": "vartext",
            "translatable": false,
            "type": "STRING",
            "subfield": true,
			"exact": false
        },
        "varsecurities": {
            "key": "varsecurities",
            "translatable": true,
            "type": "CONTAINER",
            "subfields": [
                "varsecurity"
            ]
        },
        "varsecurity": {
            "key": "varsecurity",
            "translatable": false,
            "type": "STRING",
            "subfield": true,
			"exact": false
        },
        "valuelabels": {
            "key": "valuelabels",
            "translatable": false,
            "type": "CONTAINER",
            "subfields": [
                "value",
                "label",
                "missing"
            ]
        },
        "categories": {
            "key": "categories",
            "translatable": false,
            "type": "CONTAINER",
            "editable": false,
            "subfields": [
                "value",
                "label",
                "stat",
                "missing"
            ]
        },
        "value": {
            "_comment": "Should be a REAL instead",
            "key": "value",
            "translatable": false,
            "editable": false,
            "immutable": true,
            "type": "STRING",
            "subfield": true
        },
        "label": {
            "key": "label",
            "translatable": true,
            "editable": false,
            "immutable": true,
            "type": "STRING",
            "subfield": true,
            "generalSearch": true,
			"exact": false
        },
        "stat": {
            "key": "stat",
            "translatable": false,
            "editable": false,
            "immutable": true,
            "type": "INTEGER",
            "subfield": true
        },
        "missing": {
            "_comment": "Only valid value is Y, might be good to move the value to a selection list",
            "key": "missing",
            "translatable": false,
            "editable": false,
            "type": "STRING",
            "subfield": true
        },
        "statistics": {
            "key": "statistics",
            "translatable": false,
            "editable": false,
            "type": "CONTAINER",
            "subfields": [
                "statisticstype",
                "statisticsvalue"
            ]
        },
        "statisticstype": {
            "key": "statisticstype",
            "translatable": false,
            "editable": false,
            "immutable": true,
            "type": "SELECTION",
            "selectionList": "statisticstype_list",
            "subfield": true
        },
        "statisticsvalue": {
            "key": "statisticsvalue",
            "translatable": false,
            "editable": false,
            "immutable": true,
            "type": "REAL",
            "subfield": true
        },
        "translations": {
            "_comment": "This container should contain a list of language codes represented in this variable from translatable fields. So for example if varlabel contains english text this container should have a row with value en",
            "key": "translations",
            "type": "CONTAINER",
            "translatable": false,
            "editable": false,
            "subfields": [
                "translation"
            ]
        },
        "translation": {
            "_comment": "This should contain a single language code that is represented in this variable.",
            "key": "translation",
            "type": "STRING",
            "immutable": true,
            "translatable": false,
            "editable": false,
            "subfield": true

        }
    },
    "restrictions": [{
        "type": "APPROVE",
        "targets": [{
            "type": "FIELD",
            "content": "variables",
            "checks": [{
                "condition": {
                    "type": "NOT_EMPTY"
                }
            }]
        }, {
            "type": "FIELD",
            "content": "varid",
            "checks": [{
                "condition": {
                    "type": "NOT_EMPTY"
                }
            }]
        }, {
            "type": "FIELD",
            "content": "varlabel",
            "checks": [{
                "condition": {
                    "type": "NOT_EMPTY"
                }
            }]
        }, {
            "type": "FIELD",
            "content": "varname",
            "checks": [{
                "condition": {
                    "type": "NOT_EMPTY"
                }
            }]
        }]
    }]
}
